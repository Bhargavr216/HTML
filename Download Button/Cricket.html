<!DOCTYPE html>
<html>
<head>
<title>Live Cricket Prediction Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
font-family:Arial;
background:linear-gradient(135deg,#141e30,#243b55);
color:white;
text-align:center;
margin:0;
padding:20px;
}
.card{
background:rgba(255,255,255,0.1);
padding:20px;
border-radius:20px;
margin:15px auto;
max-width:1000px;
}
button{
padding:8px 12px;
margin:5px;
border:none;
border-radius:8px;
cursor:pointer;
font-weight:bold;
}
.primary{background:#00f5a0;color:black;}
.predict-btn{background:#ffcc00;}
.selected{background:#ff5722;color:white;}
.players{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
gap:15px;
margin-top:15px;
}
.player-card{
background:rgba(255,255,255,0.15);
padding:15px;
border-radius:15px;
}
.timer{
font-size:20px;
font-weight:bold;
color:#00f5a0;
}
</style>
</head>

<body>

<h1>üèè Live Auto Prediction Game</h1>

<div class="card">
<h3>Enter Players</h3>
<input type="number" id="playerCount">
<button class="primary" onclick="createInputs()">Next</button>
<div id="playerInputs"></div>
</div>

<div class="card">
<div class="timer">Last Ball: <span id="lastBall">Waiting...</span></div>
<div class="players" id="players"></div>
</div>

<div class="card">
<h3>üèÜ Leaderboard</h3>
<div id="leaderboard"></div>
</div>

<script>

let players=[];
let lastProcessedBall="";

function createInputs(){
let count=document.getElementById("playerCount").value;
let container=document.getElementById("playerInputs");
container.innerHTML="";
for(let i=0;i<count;i++){
container.innerHTML+=`<input type="text" placeholder="Player ${i+1}" id="p${i}">`;
}
container.innerHTML+=`<br><button class="primary" onclick="startGame(${count})">Start Game</button>`;
}

function startGame(count){
players=[];
for(let i=0;i<count;i++){
let name=document.getElementById("p"+i).value;
players.push({name:name,score:0,prediction:""});
}
render();
startLiveFetch();
}

function render(){
let div=document.getElementById("players");
div.innerHTML="";
players.forEach((p,i)=>{
div.innerHTML+=`
<div class="player-card">
<h4>${p.name}</h4>
<b>${p.score} pts</b>
<br><br>
${["0","1","2","3","4","6","Wicket"].map(r=>
`<button class="predict-btn ${p.prediction===r?'selected':''}"
onclick="setPrediction(${i},'${r}')">${r}</button>`
).join("")}
<br><br>
Selected: ${p.prediction||"-"}
</div>`;
});
updateLeaderboard();
}

function setPrediction(index,value){
players[index].prediction=value;
render();
}

function updateLeaderboard(){
let sorted=[...players].sort((a,b)=>b.score-a.score);
let board=document.getElementById("leaderboard");
board.innerHTML="";
sorted.forEach((p,i)=>{
board.innerHTML+=`<div>${i+1}. ${p.name} - ${p.score} pts</div>`;
});
}

// üî• LIVE FETCH (Replace with your API key)
function startLiveFetch(){
setInterval(fetchLiveBall,10000);
}

async function fetchLiveBall(){

// ‚ö†Ô∏è YOU MUST PUT YOUR RAPIDAPI KEY HERE
const API_KEY = "YOUR_RAPIDAPI_KEY";

try{

const response = await fetch("https://cricbuzz-cricket.p.rapidapi.com/mcenter/v1/41881",{
method:"GET",
headers:{
"X-RapidAPI-Key": API_KEY,
"X-RapidAPI-Host": "cricbuzz-cricket.p.rapidapi.com"
}
});

const data = await response.json();

// ‚ö° Example parsing (depends on API structure)
let currentOver = data?.liveScore?.recentOvsStats;

if(currentOver && currentOver !== lastProcessedBall){

lastProcessedBall=currentOver;
document.getElementById("lastBall").innerText=currentOver;

// Extract last character of over string
let result=currentOver.split(" ").pop();
processResult(result);

}

}catch(err){
console.log("Live API failed",err);
}
}

function processResult(result){
players.forEach(p=>{
if(p.prediction===result){
p.score+=1;
}
p.prediction="";
});
render();
}

</script>

</body>
</html>
